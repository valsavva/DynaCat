<Include>	

	<Resources RootFolder="Sound">
		<SoundFile Id="sndEnemyRat3Dying" Source="skeletonFX_enemy_dead_scream_1"/>
        <SoundFile Id="sndEnemyRat3Hit1" Source="rat_hit1_demo"/>
        <SoundFile Id="sndEnemyRat3Hit2" Source="rat_hit2_demo"/>
        <SoundFile Id="sndEnemyRat3Hit3" Source="rat_hit3_demo"/>
    </Resources>
	
    <Resources RootFolder="Textures">
        <Texture Id="txrEnemyRat3Default" Source="EnemyRat3_enemy_1"/>
        <Texture Id="txrEnemyRat3Attack" Source="EnemyRat3_enemy_1"/>
        <Texture Id="txrEnemyRat3Dying" Source="EnemyRat3_enemy_1"/>
    </Resources>

         
	<Class Id="clsEnemyRat3">
		<Enemy IsExploding="true" Damage="9" Points="75">
		
<!-- States -->

            <!-- explosion -->
            <!-- dying -->
			<BoolTrigger Condition="this:BoomClose" EnterAction="this_setDying.Start()" StayTriggered="true" Group="this_sttStates">
				<Image TextureId="txrEnemyRat3Dying" Bounds="-14, -3, 46, 30"/>
			</BoolTrigger>
            <ParallelSet Id="this_setDying" InProgress="false">
                <Do Action="hero:+GoodExplosion"/>
                <Sound FileId="sndEnemyRat3Dying" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
    			<SequenceSet>
    				<NumAnimation Target="this.Opacity" From="1" To="0" Duration="0.3" Autoreverse="false" RepeatCount="2"/>
    				<Do Action="hero.AddScore(this.Points);this.Disable()"/>
    			</SequenceSet>
			</ParallelSet>

            <!-- attack -->
            <IntersectionTrigger ObjectId1="hero" ObjectId2="this" EnterAction="this.Attack();this.Attack();this_anmDamageDealing.Start()" ExitAction="this_anmDamageDealing.Stop()" Action="hero:GottaDamage" Group="this_sttStates">
                <Image Id="this_txrEnemyRat3Attack" TextureId="txrEnemyRat3Attack" Bounds="-14, -3, 46, 30"/>
            </IntersectionTrigger>

            <SequenceSet Id="this_anmDamageDealing" RepeatCount="0">
                <Do Action="this_anmAttack.Start()" />
                <Delay Duration="system.Rnd(0.5,1)" />
            </SequenceSet>

            <ParallelSet Id="this_anmAttack" RepeatCount="1">
                <Do Action="this.Attack()" />
                <RandomSet>
                    <Sound FileId="sndEnemyRat3Hit1" Volume="0.5" Pitch="0" Pan="0"/>
                    <Sound FileId="sndEnemyRat3Hit2" Volume="0.5" Pitch="0" Pan="0"/>
                    <Sound FileId="sndEnemyRat3Hit3" Volume="0.5" Pitch="0" Pan="0"/>
                    <Sound FileId="sndEnemyRat3Hit1" Volume="0.5" Pitch="-0.1" Pan="0"/>
                    <Sound FileId="sndEnemyRat3Hit2" Volume="0.5" Pitch="-0.1" Pan="0"/>
                    <Sound FileId="sndEnemyRat3Hit3" Volume="0.5" Pitch="-0.1" Pan="0"/>
                </RandomSet>
                <NumAnimation Duration="0.1" Target="this_txrEnemyRat3Attack.Opacity" Autoreverse="true" From="1" To="0" RepeatCount="5"/>
            </ParallelSet>

            <!-- default -->
			<BoolTrigger Group="this_sttStates">
				<Image Id="this_txrEnemyRat3Default" TextureId="txrEnemyRat3Default" Bounds="-14, -3, 46, 30"/>
                <!--<Image TextureId="blank" BackColor="#00FF00" Opacity="0.5"/>-->
			</BoolTrigger>
			
		</Enemy>
	</Class>

</Include>

















