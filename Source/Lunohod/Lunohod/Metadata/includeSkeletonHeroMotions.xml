<Include xsi:noNamespaceSchemaLocation="file:///D:/Lunohod/Prototype/Docs/schema0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<Resources RootFolder="Global">
		<Texture Id="blank" Source="blank"/>
		<Font Id="SystemFont" Source="SystemFont"/>
	</Resources>
	
    <Text Id="txtCurrentSpeed" FontId="SystemFont" Location="55,5" Text="=hero.Speed" Color="#000000"/>
    <Text Id="txtValue1" FontId="SystemFont" Location="5,20"  Text="=@heroSpeed1" Color="#000000" />
    
	<!-- Global variables. Will be moved out here. -->
	<Do Action="@heroBaseSpeed=60;@heroBaseTime=6;" InProgress="true"/>
	
	<Do Id="doNormalSpeed" Action="
			@heroTime1=@heroBaseTime/20;@heroTime2=@heroBaseTime/10;@heroTime3=@heroBaseTime;
			@heroSpeed1=@heroBaseSpeed;@heroSpeed2=@heroBaseSpeed*2;@heroSpeed3=@heroBaseSpeed*1.4;"
			InProgress="true"
	/>
	<Do Id="doBolotoSpeed" Action="
			@heroTime1=@heroBaseTime/40;@heroTime2=@heroBaseTime/20;@heroTime3=@heroBaseTime/2;
			@heroSpeed1=@heroBaseSpeed/2;@heroSpeed2=@heroBaseSpeed;@heroSpeed3=@heroBaseSpeed*0.7;" />

	<!-- this should not belong to any group -->
	<BoolTrigger Condition="this:InBoloto" EnterAction="doBolotoSpeed.Start()" ExitAction="doNormalSpeed.Start()"/>

	<BoolTrigger Condition="this:OnIce" EnterAction="anmDeceleration.Pause()" ExitAction="anmDeceleration.Resume()" />
	
	<BoolTrigger Condition="system:left" EnterAction="anmDeceleration.Start()" Group="heroSpeedAnm"/>
	<BoolTrigger Condition="system:right" EnterAction="anmDeceleration.Start()"  Group="heroSpeedAnm"/>
	<BoolTrigger Condition="system:up" EnterAction="anmDeceleration.Start()"  Group="heroSpeedAnm"/>
	<BoolTrigger Condition="system:down" EnterAction="anmDeceleration.Start()"  Group="heroSpeedAnm"/>

	<!-- hero speed animation -->
	<NumAnimation Id="anmDeceleration" Target="hero.Speed" IsDelta="false" RepeatCount="1" Fill="End">
        <KeyFrame Time="0" Value="@heroSpeed1" Smoothing="Smooth"/>
        <KeyFrame Time="@heroTime1" Value="@heroSpeed2" Smoothing="Smooth"/>
        <KeyFrame Time="@heroTime2" Value="@heroSpeed3" Smoothing="Smooth"/>
        <KeyFrame Time="@heroTime3" Value="0" Smoothing="Smooth"/>
    </NumAnimation>
</Include>













