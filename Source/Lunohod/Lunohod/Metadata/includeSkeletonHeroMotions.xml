<Include xsi:noNamespaceSchemaLocation="file:///D:/Lunohod/Prototype/Docs/schema0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<Resources RootFolder="Global">
		<Texture Id="blank" Source="blank"/>
		<Font Id="SystemFont" Source="SystemFont"/>
	</Resources>
	
    <Text Id="txtValue1" FontId="SystemFont" Location="0,25"  Text="='(' + system.Str(@heroSpeed1) + ')(' + system.Str(@heroTime4) + ') ' + system.Str(hero.Speed)" Color="#000000" />
    
	<!-- Global variables. Will be moved out here. -->
	<Do Action="@heroBaseSpeed=60;@heroBaseTime=4.2;" InProgress="true"/>
	
	<Do Id="doNormalSpeed" Action="
			@heroTime1=@heroBaseTime/20;@heroTime2=@heroBaseTime/10;@heroTime3=@heroBaseTime/2;@heroTime4=@heroBaseTime;
			@heroSpeed1=@heroBaseSpeed;@heroSpeed2=@heroBaseSpeed*2.2;@heroSpeed3=@heroBaseSpeed*2;@heroSpeed4=@heroBaseSpeed*1;"
			InProgress="true"
	/>
	<Do Id="doBolotoSpeed" Action="
			@heroTime1=@heroBaseTime/40;@heroTime2=@heroBaseTime/20;@heroTime3=@heroBaseTime/4;@heroTime4=@heroBaseTime/2;
			@heroSpeed1=@heroBaseSpeed*0.5;@heroSpeed2=@heroBaseSpeed*1.2;@heroSpeed3=@heroBaseSpeed*0.7;@heroSpeed4=@heroBaseSpeed*0.3;" />

	<!-- this should not belong to any group -->
	<BoolTrigger Condition="this:InBoloto" EnterAction="doBolotoSpeed.Start()" ExitAction="doNormalSpeed.Start()"/>

	<BoolTrigger Condition="this:OnIce" EnterAction="anmDeceleration.Pause()" ExitAction="anmDeceleration.Resume()" />
	
	<BoolTrigger Condition="system:left" EnterAction="anmDeceleration.Start()" Group="heroSpeedAnm"/>
	<BoolTrigger Condition="system:right" EnterAction="anmDeceleration.Start()"  Group="heroSpeedAnm"/>
	<BoolTrigger Condition="system:up" EnterAction="anmDeceleration.Start()"  Group="heroSpeedAnm"/>
	<BoolTrigger Condition="system:down" EnterAction="anmDeceleration.Start()"  Group="heroSpeedAnm"/>

	<!-- hero speed animation -->
	<NumAnimation Id="anmDeceleration" Target="this.Speed" IsDelta="false" RepeatCount="1" Fill="End">
        <KeyFrame Time="0" Value="@heroSpeed1" Smoothing="Smooth"/>
        <KeyFrame Time="@heroTime1" Value="@heroSpeed2" Smoothing="Smooth"/>
        <KeyFrame Time="@heroTime2" Value="@heroSpeed3" Smoothing="Smooth"/>
        <KeyFrame Time="@heroTime3" Value="@heroSpeed4" Smoothing="Smooth"/>
        <KeyFrame Time="@heroTime4" Value="0" Smoothing="Smooth"/>
    </NumAnimation>
	
	
	<!-- ** Animation parameters adjustment. Need to remove this at some point. ** -->
	<!-- don't know why don't work this
    <BoolTrigger Condition="system:heroSpeedRecalculate">
    -->
		<BoolTrigger Condition="system:heroReduceSpeed" Action="@heroBaseSpeed=@heroBaseSpeed-5"/>
		<BoolTrigger Condition="system:heroIncreaseSpeed" Action="@heroBaseSpeed=@heroBaseSpeed+5"/>
		<BoolTrigger Condition="system:heroReduceTime" Action="@heroBaseTime=@heroBaseTime-0.5"/>
		<BoolTrigger Condition="system:heroIncreaseTime" Action="@heroBaseTime=@heroBaseTime+0.5"/>
		<BoolTrigger Condition="this:InBoloto" Action="doBolotoSpeed.Start()"/>
		<BoolTrigger Condition="!this:InBoloto" Action="doNormalSpeed.Start()"/>
	<!--</BoolTrigger>-->
	
</Include>













