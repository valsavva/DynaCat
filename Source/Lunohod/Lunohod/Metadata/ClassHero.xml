<Include xsi:noNamespaceSchemaLocation="file:///D:/Lunohod/Docs/schema0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

	<Resources RootFolder="Sound">
		<SoundFile Id="sndHeroDying" Source="skeletonFX_crash_1"/>
		<SoundFile Id="sndHeroEating1" Source="skeletonFX_hero_eating_1"/>
		<SoundFile Id="sndHeroEating2" Source="skeletonFX_hero_eating_2"/>
		<SoundFile Id="sndHeroEating3" Source="skeletonFX_hero_eating_3"/>
		<SoundFile Id="sndHeroEating4" Source="skeletonFX_hero_eating_4"/>
		<SoundFile Id="sndHeroBounce1" Source="skeletonFX_hero_metal_wall_1"/>
		<SoundFile Id="sndHeroBounce2" Source="skeletonFX_hero_metal_wall_2"/>
	</Resources>
	
    <Resources RootFolder="Textures">
        <Texture Id="txrHeroDefault" Source="cat_new_test"/>
        <Texture Id="txrHeroDying" Source="cat_new_test"/>
        <Texture Id="txrHeroWaitingExplosion" Source="cat_new_test_bomb"/>
    </Resources>

	<Class Id="clsHero">
		<Hero Speed="84" Direction="0,0" Deceleration="0">
            <Include File="includeSkeletonHeroMotions.xml"/>
		
<!-- Init Vars -->

         	<Do InProgress="true" Action="
                @heroDepartPointX=0;
                @heroDepartPointY=0;
                @heroDestPointX=0;
                @heroDestPointY=0"/>
                
<!-- Moving -->

        
        	<!-- enter -->
            <BoolTrigger Condition="this:Enter" EnterAction="setHeroEnter.Start()">
                <SequenceSet Id="setHeroEnter">
                    <Do Action="hero.StartTransaction()"/>
                    <NumAnimation Target="hero.X,hero.Y,hero.Opacity" From="@heroDepartPointX,@heroDepartPointY,1" To="@heroDestPointX,@heroDestPointY,0" Duration="0.5" InProgress="true" RepeatCount="1" Fill="End"/>
                    <Delay Duration="1.5"/>
                    <Do Action="hero.EndTransaction();this:-Enter"/>
                </SequenceSet>
            </BoolTrigger>
          

<!-- States -->

            <!-- dying -->
			<BoolTrigger Condition="this.IsDead" EnterAction="setHeroDying.Start()" StayTriggered="true" Group="sttHeroStates">
				<Image Id="imgHeroDying" TextureId="txrHeroDying"/>
				<SequenceSet Id="setHeroDying">
					<Do Action="this.StartTransaction()"/>
					<ParallelSet>
						<Sound FileId="sndHeroDying" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
						<NumAnimation Duration="0.1" Target="imgHeroDying.Opacity" Autoreverse="true" From="1" To="0" RepeatCount="5"/>
					</ParallelSet>
					<Do Action="this.EndTransaction()"/>
					<Do Action="system.EndCurrentLevel()"/>
				</SequenceSet>
			</BoolTrigger>

            <!-- eating -->
			<BoolTrigger Condition="this:Eating" EnterAction="setHeroEating.Start()" StayTriggered="false">
				<RandomSet Id="setHeroEating">
					<Sound FileId="sndHeroEating1" Volume="0.5" Pitch="0"/>
					<Sound FileId="sndHeroEating2" Volume="0.5" Pitch="0"/>
					<Sound FileId="sndHeroEating3" Volume="0.5" Pitch="0"/>
					<Sound FileId="sndHeroEating4" Volume="0.5" Pitch="0"/>
					<Sound FileId="sndHeroEating1" Volume="0.5" Pitch="0.3"/>
					<Sound FileId="sndHeroEating2" Volume="0.5" Pitch="0.3"/>
					<Sound FileId="sndHeroEating3" Volume="0.5" Pitch="0.3"/>
					<Sound FileId="sndHeroEating4" Volume="0.5" Pitch="0.3"/>
				</RandomSet>
			</BoolTrigger>

            <!-- explosion -->
			<BoolTrigger Condition="this:WaitingExplosion" Group="sttHeroStates">
                <!--bolbex<Image TextureId="txrHeroWaitingExplosion" Bounds="-3, -14, 40, 38"/>-->
				<Image TextureId="txrHeroWaitingExplosion" Bounds="-4, -10, 42, 32"/>
			</BoolTrigger>

            <!-- default -->
			<BoolTrigger Group="sttHeroStates">
                <Image TextureId="txrHeroDefault" Bounds="-4, -10, 42, 32"/>
				<!--bolbex:<Image TextureId="txrHeroDefault" Bounds="-3, -14, 40, 38"/>-->
                <!--<Image TextureId="blank" BackColor="#00FF00" Opacity="0.5"/>-->
			</BoolTrigger>

<!-- foley -->

            <BoolTrigger Condition="hero:bounce" EnterAction="this_setHeroBounce.Start()"/>
            <RandomSet Id="this_setHeroBounce">
				<Sound FileId="sndHeroBounce1" Volume="0.5" Pitch="0"/>
				<Sound FileId="sndHeroBounce2" Volume="0.5" Pitch="0"/>
				<Sound FileId="sndHeroBounce1" Volume="0.5" Pitch="-0.3"/>
				<Sound FileId="sndHeroBounce2" Volume="0.5" Pitch="-0.3"/>
			</RandomSet>

		</Hero>
		
	</Class>


</Include>






















