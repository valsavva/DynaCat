<?xml version="1.0" encoding="UTF-8"?>

<Screen Bounds="0,0,480,320" IsModal="true">
    <Include File="CommonScreenFunctionality.xml" />

    <Include File="ClassUIMovingBackground.xml" />
    <Include File="ClassUIButton.xml" />
    <Include File="ClassUILevelNumberPanel.xml" />

    <Resources RootFolder="Global">
        <Texture Id="txrBackground" Source="Victory_BG" />
        <Texture Id="txrHeroArt" Source="Victory_Hero" />
        <Texture Id="txrScore" Source="scores" />
        <Texture Id="txrPanels" Source="select_level_panels" />
        <Texture Id="txrStar" Source="select_level_panel_star" />
        <Texture Id="txrBadge" Source="select_level_panel_beydg" />
        
        <Font Id="fntSystem" Source="SystemFont"/>
    </Resources>

	<Layer Id="background">
		<Group Class="clsMovingBackground" ClassParams="@textureIdParam=txrBackground" />
	</Layer>
	<Layer>
		<Do Action="levelScore.Score = hero.Score; levelScore.Health = hero.Health; levelScore.Time = hero.Time; levelScore.Save();" InProgress="true" />
		
		<Image TextureId="txrHeroArt" Location="110,0" />
		
		<Group Id="grpLevelNumberPanel" Bounds="25,15,100,100" Class="clsLevelNumberPanel"/>

		<Group Id="btnRestart" Class="clsButton" ClassParams="@BtnImg=restart" Bounds="40, 190, 62, 62">
		    <BoolTrigger Condition="btnRestart:Action" EnterAction="system.CloseCurrentScreen();system.RestartLevel();" />
		</Group>
		<Group Id="btnHome" Class="clsButton" ClassParams="@BtnImg=exit" Bounds="40, 256, 62, 62">
		    <BoolTrigger Condition="btnHome:Action" EnterAction="system.CloseCurrentScreen();system.AbandonLevel();" />
		</Group>
		<Group Id="btnNextLevel" Class="clsButton" ClassParams="@BtnImg=forwind" Bounds="380, 256, 62, 62">
		    <BoolTrigger Condition="btnNextLevel:Action" EnterAction="system.CloseCurrentScreen();system.StartNextLevel();" />
		</Group>

		<Group Bounds="175,235,150,60">
			<!-- star plate -->
			<Group Location="65,0">
	    		<Sprite Id="this_sprPanel" TextureId="txrPanels" Location="0,0" FrameBounds="0,0,94,51" FrameCount="2" StretchMode="ActualSize"/>

			    <BoolTrigger Condition="levelScore.NumberOfStars>0">
			    	<Image TextureId="txrStar" Location="24,32" />
			    </BoolTrigger>
			    <BoolTrigger Condition="levelScore.NumberOfStars>1">
			    	<Image TextureId="txrStar" Location="37,32" />
			    </BoolTrigger>
			    <BoolTrigger Condition="levelScore.NumberOfStars>2">
			    	<Image TextureId="txrStar" Location="50,32" />
			    </BoolTrigger>
			    
			    <BoolTrigger Condition="levelScore.HasBadge">
			    	<Image TextureId="txrBadge" Location="65,20" Depth="0.2" />
			    </BoolTrigger>
	    	</Group>
	    	<!-- score plate -->
			<Image TextureId="txrScore" Location="0,0" StretchMode="ActualSize" />
			<Text Text="=system.Str(levelScore.TotalScore)" Location="70,5" FontId="Splash14Font" />
		</Group>

	</Layer>
</Screen>