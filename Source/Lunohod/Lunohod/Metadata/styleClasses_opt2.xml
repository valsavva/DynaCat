<Include>	
	
	<!-- =========================================================================================  -->
	<!-- Sounds -->
	<!-- =========================================================================================  -->
	
	<Resources RootFolder="Sound">
		<SoundFile Id="skeletonFX_alarm_1" Source="skeletonFX_alarm_1"/>
		<SoundFile Id="skeletonFX_crash_1" Source="skeletonFX_crash_1"/>
		<SoundFile Id="skeletonFX_explosion" Source="skeletonFX_explosion"/>
		<SoundFile Id="skeletonFX_electric_spark_1" Source="skeletonFX_electric_spark_1"/>
		<SoundFile Id="skeletonFX_electric_spark_2" Source="skeletonFX_electric_spark_2"/>
		<SoundFile Id="skeletonFX_electric_spark_3" Source="skeletonFX_electric_spark_3"/>
		<SoundFile Id="skeletonFX_electric_spark_4" Source="skeletonFX_electric_spark_4"/>
		<SoundFile Id="skeletonFX_enemy_dead_scream_1" Source="skeletonFX_enemy_dead_scream_1"/>
		<SoundFile Id="skeletonFX_hero_eating_1" Source="skeletonFX_hero_eating_1"/>
		<SoundFile Id="skeletonFX_hero_eating_2" Source="skeletonFX_hero_eating_2"/>
		<SoundFile Id="skeletonFX_hero_eating_3" Source="skeletonFX_hero_eating_3"/>
		<SoundFile Id="skeletonFX_hero_eating_4" Source="skeletonFX_hero_eating_4"/>
		<SoundFile Id="skeletonFX_hero_killing_1" Source="skeletonFX_hero_killing_1"/>
		<SoundFile Id="skeletonFX_hero_killing_2" Source="skeletonFX_hero_killing_2"/>
		<SoundFile Id="skeletonFX_hero_metall_wall_1" Source="skeletonFX_hero_metall_wall_1"/>
		<SoundFile Id="skeletonFX_hero_wooden_wall_1" Source="skeletonFX_hero_wooden_wall_1"/>
		<SoundFile Id="skeletonFX_hero_wooden_wall_2" Source="skeletonFX_hero_wooden_wall_2"/>
		<SoundFile Id="skeletonFX_hero_wooden_wall_3" Source="skeletonFX_hero_wooden_wall_3"/>
		<SoundFile Id="skeletonFX_laughting_1" Source="skeletonFX_laughting_1"/>
		<SoundFile Id="skeletonFX_plick1" Source="skeletonFX_plick1"/>
		<SoundFile Id="skeletonFX_plick2" Source="skeletonFX_plick2"/>
		<SoundFile Id="skeletonFX_plick3" Source="skeletonFX_plick3"/>
		<SoundFile Id="skeletonFX_port_in" Source="skeletonFX_port_in"/>
		<SoundFile Id="skeletonFX_port_out" Source="skeletonFX_port_out"/>
		<SoundFile Id="skeletonFX_roket_start" Source="skeletonFX_roket_start"/>
	</Resources>

	
	               	
	<!-- =========================================================================================  -->
	<!-- clsTower -->
	<!-- =========================================================================================  -->
	
	<Class Id="clsTower">
		<Tower SignalSpeed="256"/>
	</Class>

	<!-- =========================================================================================  -->
	<!-- clsHero -->
	<!-- =========================================================================================  -->
	
    <Resources RootFolder="TestTextures">
        <Texture Id="cursor_50x50_light_blue" Source="bolbex-1"/>
        <Texture Id="cursor_50x50_blue" Source="bolbex-1"/>
    </Resources>
	
	<Class Id="clsHero">
		<Hero Speed="84" Direction="0,0" Deceleration="0">
			
			<Include File="includeSkeletonHeroMotions.xml" />
			
			<BoolTrigger Condition="this.IsDead" EnterAction="this_setDying.Start()" StayTriggered="true" Group="heroStates">
				<Image Id="this_img1" TextureId="cursor_50x50_light_blue"/>
				<SequenceSet Id="this_setDying">
					<Do Action="hero.SetTransaction()"/>
					<ParallelSet>
						<Sound FileId="skeletonFX_crash_1" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
						<NumAnimation Duration="0.1" Target="this_img1.Opacity" Autoreverse="true" From="1" To="0" RepeatCount="5"/>
					</ParallelSet>
					<Do Action="hero.EndTransaction()"/>
					<Do Action="system.EndLevel()"/>
				</SequenceSet>

			</BoolTrigger>
			
			<BoolTrigger Condition="this:eating" EnterAction="fx_thisEating.Start()" StayTriggered="false">
				<RandomSet Id="fx_thisEating">
					<Sound FileId="skeletonFX_hero_eating_1" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
					<Sound FileId="skeletonFX_hero_eating_2" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
					<Sound FileId="skeletonFX_hero_eating_3" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
					<Sound FileId="skeletonFX_hero_eating_4" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
				</RandomSet>
			</BoolTrigger>
			
			<BoolTrigger Id="default" Group="heroStates">
				<Image TextureId="cursor_50x50_blue" Bounds="-3, -14, 40, 39"/>      <!-- 33, 25-->
			</BoolTrigger>
		</Hero>
	</Class>

	<!-- =========================================================================================  -->
	<!-- clsHeroTir -->
	<!-- =========================================================================================  -->
	
	<Class Id="clsHeroTir">
		<Hero Speed="1680" Direction="0,0">
			<BoolTrigger Id="this_default" Group="heroStates">
				<Image TextureId="cursor_50x50_blue"/>
			</BoolTrigger>
		</Hero>
	</Class>

	<!-- =========================================================================================  -->
	<!-- clsEnemy -->
	<!-- =========================================================================================  -->
	
    <Resources RootFolder="TestTextures">
        <Texture Id="cursor_50x50_red" Source="enemy_1_40x29"/>
        <Texture Id="cursor_50x50_purple" Source="enemy_1_40x29"/>
    </Resources>
         
	<Class Id="clsEnemy">
		<Enemy IsExploding="true" Damage="1">
			
			<BoolTrigger Condition="this:boomClose" EnterAction="this_setDestroyEnemy.Start();this_sndDeath.Start()" StayTriggered="false" Group="grpEnemyBoomStates">
				<Image TextureId="cursor_50x50_purple"/>
				<Sound Id="this_sndDeath" FileId="skeletonFX_enemy_dead_scream_1" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
			</BoolTrigger>
			<SequenceSet Id="this_setDestroyEnemy" InProgress="false">
				<NumAnimation Target="this.Opacity" From="1" To="0" Duration="0.3" Autoreverse="false" RepeatCount="2"/>
				<Do Action="this.Disable()"/>
			</SequenceSet>
			
   			<IntersectionTrigger ObjectId1="hero" ObjectId2="this" EnterAction="this.Attack();this_anmAttack.Start()" StayTriggered="false" Group="enemyStates">
                <Image Id="this_skin" TextureId="cursor_50x50_red"/>
			</IntersectionTrigger>
			<NumAnimation Id="this_anmAttack" Duration="0.1" Target="this_skin2.Opacity" Autoreverse="true" From="1" To="0" RepeatCount="5"/>
			<BoolTrigger Id="this_default" Group="enemyStates">
				<Image Id="this_skin2" TextureId="cursor_50x50_purple"/>
			</BoolTrigger>
		</Enemy>
	</Class>

	<!-- =========================================================================================  -->
	<!-- clsFood -->
	<!-- =========================================================================================  -->

    <Resources RootFolder="TestTextures">
        <Texture Id="cursor_50x50_green" Source="fish"/>
    </Resources>

	<Class Id="clsFood">
		<Food IsExploding="true">

			<BoolTrigger Condition="this:boomClose" EnterAction="this_setDestroy1.Start()" StayTriggered="true" Group="foodStates">
				<Image TextureId="cursor_50x50_green"/>
			</BoolTrigger>
			<SequenceSet Id="this_setDestroy1" InProgress="false">
				<NumAnimation Target="this.Opacity" From="1" To="0" Duration="0.3" Autoreverse="false" RepeatCount="2"/>
				<Do Action="this.Disable()"/>
			</SequenceSet>

			<BoolTrigger Condition="this:boomFar" EnterAction="this_setQuake1.Start()" StayTriggered="false" Group="foodStates">
				<Image TextureId="cursor_50x50_green"/>
			</BoolTrigger>
			<SequenceSet Id="this_setQuake1" InProgress="false" RepeatCount="1">
				<NumAnimation Target="this.Rotation" From="-2" To="2" Duration="0.15" Autoreverse="false" RepeatCount="3" IsDelta="false"/>
			</SequenceSet>

			<IntersectionTrigger ObjectId1="hero" ObjectId2="this" EnterAction="this_anmEated.Start();hero:eating" StayTriggered="true" Group="foodStates">
				<Image TextureId="cursor_50x50_green">
					<SequenceSet InProgress="true">
                        <ParallelSet Id="this_anmEated">
                            <NumAnimation Duration="0.2" Target="this.Opacity" Autoreverse="false" From="1" To="0" Fill="End" RepeatCount="5" InProgress="true"/>
                            <NumAnimation Duration="1" Target="this.X,this.Y" Autoreverse="false" From="this.X,this.Y" To="hero.X,hero.Y" Fill="End" RepeatCount="1" InProgress="true"/>
                            
						</ParallelSet>
						<Do Action="this.Disable()"/>
					</SequenceSet>
				</Image>
			</IntersectionTrigger>
			
			<BoolTrigger Id="this_default" Group="foodStates">
				<Image TextureId="cursor_50x50_green"/>
			</BoolTrigger>	
		</Food>	
	</Class>

	<!-- =========================================================================================  -->
	<!-- clsFoodPack -->
	<!-- =========================================================================================  -->

    <Resources RootFolder="TestTextures">
        <Texture Id="cursor_solid_50x50_red" Source="cursor_solid_50x50_red"/>
        <Texture Id="cursor_solid_50x50_green" Source="cursor_solid_50x50_green"/>
    </Resources>

	<Class Id="clsFoodPack">
		<Food IsExploding="true">

			<BoolTrigger Condition="this:boomVeryClose" EnterAction="this_setDestroy1.Start();this_GoodBoom.Start()" StayTriggered="true" Group="foodPackStates">
				<Image TextureId="cursor_solid_50x50_red"/>
				<Sound Id="this_GoodBoom" FileId="skeletonFX_laughting_1" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
			</BoolTrigger>
			<SequenceSet Id="this_setDestroy1" InProgress="false">
				<NumAnimation Target="this.Opacity" From="1" To="0" Duration="0.1" Autoreverse="false" RepeatCount="6"/>
				<Do Action="this.Disable()"/>
			</SequenceSet>

			<BoolTrigger Condition="this:boomClose" EnterAction="this_setDestroy2.Start()" StayTriggered="true" Group="foodPackStates">
				<Image TextureId="cursor_solid_50x50_green"/>
			</BoolTrigger>
			<SequenceSet Id="this_setDestroy2" InProgress="false">
				<NumAnimation Target="this.Opacity" From="1" To="0" Duration="0.3" Autoreverse="false" RepeatCount="2"/>
				<Do Action="this.Disable()"/>
			</SequenceSet>

			<BoolTrigger Condition="this:boomFar" EnterAction="this_setQuake1.Start()" StayTriggered="false" Group="foodPackStates">
				<Image TextureId="cursor_solid_50x50_green"/>
			</BoolTrigger>
			<SequenceSet Id="this_setQuake1" InProgress="false" RepeatCount="1">
				<NumAnimation Target="this.Rotation" From="-2" To="2" Duration="0.15" Autoreverse="false" RepeatCount="3" IsDelta="false"/>
			</SequenceSet>

			<BoolTrigger Id="this_default" Group="foodPackStates">
				<Image TextureId="cursor_solid_50x50_green"/>
			</BoolTrigger>	
		</Food>	
	</Class>


	<!-- =========================================================================================  -->
	<!-- clsWoodenBox -->
	<!-- =========================================================================================  -->

    <Resources RootFolder="TestTextures">
        <Texture Id="cursor_50x50_brown" Source="cursor_50x50_brown"/>
    </Resources>
	<Class Id="clsWoodenBox">
		<Block IsExploding="true" Edges="Stick">

			<BoolTrigger Condition="this:boomClose" EnterAction="this_setDestroy1.Start()" StayTriggered="false" Group="grpBoxBoomStates">
				<Image TextureId="cursor_50x50_brown"/>
			</BoolTrigger>
			<SequenceSet Id="this_setDestroy1" InProgress="false">
				<NumAnimation Target="this.Opacity" From="1" To="0" Duration="0.3" Autoreverse="false" RepeatCount="2"/>
				<Do Action="this.Disable()"/>
			</SequenceSet>

			<BoolTrigger Condition="this:boomFar" EnterAction="this_setQuake1.Start()" StayTriggered="false" Group="grpBoxBoomStates">
				<Image TextureId="cursor_50x50_brown"/>
			</BoolTrigger>
			<SequenceSet Id="this_setQuake1" InProgress="false" RepeatCount="1">
				<NumAnimation Target="this.Rotation" From="-2" To="2" Duration="0.15" Autoreverse="false" RepeatCount="3" IsDelta="false"/>
			</SequenceSet>

			<BoolTrigger Condition="this:boomVeryFar" EnterAction="this_setQuake2.Start()" StayTriggered="false" Group="grpBoxBoomStates">
				<Image TextureId="cursor_50x50_brown"/>
			</BoolTrigger>
			<SequenceSet Id="this_setQuake2" InProgress="false">
				<NumAnimation Target="this.Rotation" From="-1" To="1" Duration="0.15" Autoreverse="false" RepeatCount="2" IsDelta="false"/>
			</SequenceSet>

			<BoolTrigger Condition="this:boomVeryVeryFar" EnterAction="this_setQuake3.Start()" StayTriggered="false" Group="grpBoxBoomStates">
				<Image TextureId="cursor_50x50_brown"/>
			</BoolTrigger>
			<SequenceSet Id="this_setQuake3" InProgress="false">
				<NumAnimation Target="this.Rotation" From="-1" To="1" Duration="0.15" Autoreverse="false" RepeatCount="1" IsDelta="false"/>
			</SequenceSet>
			
			<BoolTrigger Id="this_default" Group="grpBoxStates">
				<Image TextureId="cursor_50x50_brown"/>
			</BoolTrigger>
		</Block>	
	</Class>

	<!-- =========================================================================================  -->
	<!-- clsExplosion --> <!-- This class is used to plant "bombs" -->	
	<!-- =========================================================================================  -->
	<Resources RootFolder="TestTextures">
        <Texture Id="cursor_solid_10x10_black_red" Source="cursor_solid_10x10_black_red"/>
        <Texture Id="boom_new" Source="boom_new"/>
        <Texture Id="cursor_R200_by_50_gray" Source="cursor_R200_by_50_gray"/>
	</Resources>
    
	<Class Id="clsExplosion">
		<Explosion Bounds="0,0,400,400" Ranges="boomVeryClose=50,boomClose=85,boomFar=170,boomVeryFar=210,boomVeryVeryFar=250">
			<Image Id="this_imgBomb" Bounds="190,190,20,20" TextureId="cursor_solid_10x10_black_red" Opacity="0"/>
			<Image Id="this_imgExplosion" Bounds="75,96,250,208" TextureId="boom_new" Enabled="false"/>
			<Sound Id="this_sndExplosion" FileId="skeletonFX_explosion" Volume="0.5" Pitch="0" Pan="0"/>
			<Sound Id="this_sndAlarm" FileId="skeletonFX_alarm_1" Volume="0.5" Pitch="0" Pan="0"/>
			<SequenceSet InProgress="true">
				<Do Action="this_sndAlarm.Start()"/>
				<NumAnimation Target="this_imgBomb.Opacity" From="1" To="0" Duration="0.1" Autoreverse="true" RepeatCount="4"/>
				<Do Action="this_imgBomb.Disable()"/>
				<Do Action="this_sndExplosion.Start();this_imgExplosion.Enable()"/>
				<ParallelSet InProgress="true">
					<SequenceSet InProgress="true">
						<Delay Duration="0.4"/>
						<Do Action="this.Explode();ScreenQuake.Start()"/>
					</SequenceSet>
					<NumAnimation From="1" To="0" Smoothing="Flat" Duration="0.2" Autoreverse="false" Target="this_imgExplosion.Opacity" RepeatCount="2"/>
					<Delay Duration="0.6"/>
				</ParallelSet>
				<Do Action="this.Disable()"/>
			</SequenceSet>
		</Explosion>
	</Class>
    <NumAnimation Id="ScreenQuake" Target="X" From="-1" To="1" Duration="0.1" Autoreverse="true" RepeatCount="2" Fill="Reset" IsDelta="false"/>

	<!-- =========================================================================================  -->
	<!-- clsExit -->
	<!-- =========================================================================================  -->

	<Class Id="clsExit">
		<Block>
			<Sound Id="this_RoketStart" FileId="skeletonFX_roket_start" Volume="0.5" Pitch="0" Pan="0" InProfress="true"/>
			<SequenceSet Id="this_setExit" InProgress="false">
				<Do Action="this_RoketStart.Start()"/>
				<Do Action="hero.SetTransaction()"/>
				<Do Action="hero.SetDirection(0,0)"/>
				<NumAnimation Target="this.Opacity" Duration="0.2" Autoreverse="false" From="1" To="0" InProgress="true" RepeatCount="10"/>
				<NumAnimation Target="this.Opacity" Duration="0.2" Autoreverse="false" From="1" To="1" InProgress="true" RepeatCount="1"/>
				<NumAnimation Target="this.X,this.Y,this.Rotation" Duration="2.5" Autoreverse="false" IsDelta="true" InProgress="true" RepeatCount="1" Fill="End">
					<KeyFrame Time="0" Value="0,0,0" Smoothing="Smooth"/>
					<KeyFrame Time="1" Value="0,-30,0" Smoothing="Smooth"/>
					<KeyFrame Time="1.5" Value="0,-100,0" Smoothing="Smooth"/>
					<KeyFrame Time="2.5" Value="-100,-400,-25" Smoothing="Smooth"/>
				</NumAnimation>
				<Do Action="hero.EndTransaction()"/>
				<Do Action="system.EndLevel()"/>
			</SequenceSet>
			<IntersectionTrigger ObjectId1="hero" ObjectId2="this" EnterAction="this_setExit.Start()"/>
		</Block>	
	</Class>

</Include>






