<?xml version="1.0" encoding="UTF-8" ?>

<Include>

    <Include File="ClassButton.xml" />

    <Resources RootFolder="Global">
        <Texture Id="txrBackground" Source="select_level_BG" />
        <Texture Id="txrSelectLevelText" Source="select_level_txt" />
        <Texture Id="txrPanels" Source="select_level_panels" />
        <Texture Id="txrStar" Source="select_level_panel_star" />
        <Texture Id="txrBadge" Source="select_level_panel_beydg" />
        <Texture Id="txrNumbers" Source="numbers" />
        <Font Id="fntSystem" Source="SystemFont"/>
    </Resources>

	<Class Id="clsLevelButton">
		<Group>
			<Do Action="
				@this_numberOfStars=system.GetSeriesLevelStars(@buttonSeriesNum,@levelNum);
				@this_hasBadge=system.GetSeriesLevelHasBadge(@buttonSeriesNum,@levelNum);
				@this_levelExists=system.GetSeriesLevelName(@buttonSeriesNum,@levelNum)!='';
				"
				InProgress="true"
				RepeatCount="0"
			/>
			<BoolTrigger Condition="@this_levelExists">
				<Do Action="this_sprPanel.CurrentFrame=system.Rnd(0,4);this_sprNumber.CurrentFrame=@levelNum;" InProgress="true"/>
			
				<TapArea Action="this_setPress.Start()"/>
	            <SequenceSet Id="this_setPress">
	                <NumAnimation Target="this.Scale" From="1" To="1.1" Duration="0.2" Autoreverse="true" RepeatCount="1"/>
	                <Do Action="system.StartSeriesLevel(@buttonSeriesNum,@levelNum)"/>
	            </SequenceSet>
	            
	            <Sprite Id="this_sprPanel" TextureId="txrPanels" Bounds="0,0,94,51" FrameBounds="0,0,94,51" FrameCount="2"/>

	            <Sprite Id="this_sprNumber" TextureId="txrNumbers" Bounds="5,5,84,54" FrameBounds="0,0,84,54" FrameCount="5"/>
	            
	            <BoolTrigger Condition="@this_numberOfStars>0">
	            	<Image TextureId="txrStar" Location="24,32" />
	            </BoolTrigger>
	            <BoolTrigger Condition="@this_numberOfStars>1">
	            	<Image TextureId="txrStar" Location="37,32" />
	            </BoolTrigger>
	            <BoolTrigger Condition="@this_numberOfStars>2">
	            	<Image TextureId="txrStar" Location="50,32" />
	            </BoolTrigger>
	            
	            <BoolTrigger Condition="@this_hasBadge">
	            	<Image TextureId="txrBadge" Location="50,0" />
	            </BoolTrigger>
	            
			</BoolTrigger>
		</Group>
	</Class>

	<Class Id="clsLevelsLayer">
		<Layer Id="action" BackColor="#FFFFFFFF">
            <Image TextureId="txrBackground" />
            <Image TextureId="txrSelectLevelText" Location="140,5" />
			<Group Id="grpScreen0" Bounds="015,050,500,500">
				<Group Id="grpL00" Bounds="000,000,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=00"/>
				<Group Id="grpL01" Bounds="090,000,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=01"/>
				<Group Id="grpL02" Bounds="180,000,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=02"/>
				<Group Id="grpL03" Bounds="270,000,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=03"/>
				<Group Id="grpL04" Bounds="360,000,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=04"/>

				<Group Id="grpL05" Bounds="000,052,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=05"/>
				<Group Id="grpL06" Bounds="090,052,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=06"/>
				<Group Id="grpL07" Bounds="180,052,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=07"/>
				<Group Id="grpL08" Bounds="270,052,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=08"/>
				<Group Id="grpL09" Bounds="360,052,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=09"/>

				<Group Id="grpL10" Bounds="000,104,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=10"/>
				<Group Id="grpL11" Bounds="090,104,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=11"/>
				<Group Id="grpL12" Bounds="180,104,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=12"/>
				<Group Id="grpL13" Bounds="270,104,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=13"/>
				<Group Id="grpL14" Bounds="360,104,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=14"/>

				<Group Id="grpL15" Bounds="000,156,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=15"/>
				<Group Id="grpL16" Bounds="090,156,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=16"/>
				<Group Id="grpL17" Bounds="180,156,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=17"/>
				<Group Id="grpL18" Bounds="270,156,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=18"/>
				<Group Id="grpL19" Bounds="360,156,095,050" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=19"/>
			</Group>
			<Group Id="this_btnBack" Class="clsButton" ClassParams="@BtnImg=1" Bounds="33, 256, 62, 62">
			    <BoolTrigger Condition="this_btnBack:Action" EnterAction="system.CloseCurrentScreen();this_btnBack:-Action;" />
			</Group>
		</Layer>
	</Class>	
</Include>