<?xml version="1.0" encoding="UTF-8" ?>

<Include>
	<Resources RootFolder="Global">
		<Font Id="fntSystem" Source="SystemFont"/>
	</Resources>

	<Class Id="clsLevelButton">
		<Group>
			<Do Action="
				@this_numberOfStars=system.GetSeriesLevelStars(@buttonSeriesNum,@levelNum);
				@this_starsStr=system.IIfStr(@this_numberOfStars==3,'***',system.IIfStr(@this_numberOfStars==2,'**-',system.IIfStr(@this_numberOfStars==1,'*--','---')));
				@this_starsStr=@this_starsStr + system.IIfStr(system.GetSeriesLevelHasBadge(@buttonSeriesNum,@levelNum), '# ', '  ');
				@this_levelName=system.GetSeriesLevelName(@buttonSeriesNum,@levelNum);
				@this_levelExists=@this_levelName!='';
				@this_levelName=@this_starsStr + @this_levelName;"
				InProgress="true"
				RepeatCount="0"
			/>
			<BoolTrigger Condition="@this_levelExists">
				<TapArea Action="this_setPress.Start()"/>
	            <SequenceSet Id="this_setPress">
	                <NumAnimation Target="this.Scale" From="1" To="1.2" Duration="0.3" Autoreverse="true" RepeatCount="1"/>
	                <Do Action="system.StartSeriesLevel(@buttonSeriesNum,@levelNum)"/>
	            </SequenceSet>
				<Text Id="this_text" FontId="fntSystem" Color="#003366" Origin="50,10" Location="50,10" Text="=@this_levelName" />
				<RandomSet RepeatCount="0" InProgress="true">
					<NumAnimation Target="this_text.Rotation" Autoreverse="true" RepeatCount="10" Duration="0.05" Fill="Reset">
						<KeyFrame Time="0" Value="0"/>
						<KeyFrame Time="0.01" Value="-3"/>
						<KeyFrame Time="0.05" Value="3"/>
					</NumAnimation>
					<Delay Duration="3"/>
				</RandomSet>
				<RandomSet RepeatCount="0" InProgress="true">
					<NumAnimation Target="this.X" Autoreverse="true" RepeatCount="1" Duration="1" IsDelta="true" Fill="Reset">
						<KeyFrame Time="0" Value="0" Smoothness="Smooth"/>
						<KeyFrame Time="0.3" Value="-6" Smoothness="Smooth"/>
						<KeyFrame Time="0.6" Value="6" Smoothness="Smooth"/>
						<KeyFrame Time="1" Value="0" Smoothness="Smooth"/>
					</NumAnimation>
					<Delay Duration="3"/>
				</RandomSet>
			</BoolTrigger>
		</Group>
	</Class>

	<Class Id="clsLevelsLayer">
		<Layer Id="action" BackColor="#FFFFFFFF">
			<Group Id="grpScreen0" Bounds="50,5,500,500">
				<Group Id="grpL01" Bounds="0,000,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=00"/>
				<Group Id="grpL02" Bounds="0,030,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=01"/>
				<Group Id="grpL03" Bounds="0,060,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=02"/>
				<Group Id="grpL04" Bounds="0,090,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=03"/>
				<Group Id="grpL05" Bounds="0,120,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=04"/>
				<Group Id="grpL06" Bounds="0,150,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=05"/>
				<Group Id="grpL07" Bounds="0,180,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=06"/>
				<Group Id="grpL08" Bounds="0,210,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=07"/>
				<Group Id="grpL09" Bounds="0,240,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=08"/>
				<Group Id="grpL10" Bounds="0,270,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=09"/>
				
				<Group Id="grpL11" Bounds="200,000,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=10"/>
				<Group Id="grpL12" Bounds="200,030,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=11"/>
				<Group Id="grpL13" Bounds="200,060,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=12"/>
				<Group Id="grpL14" Bounds="200,090,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=13"/>
				<Group Id="grpL15" Bounds="200,120,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=14"/>
				<Group Id="grpL16" Bounds="200,150,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=15"/>
				<Group Id="grpL17" Bounds="200,180,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=16"/>
				<Group Id="grpL18" Bounds="200,210,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=17"/>
				<Group Id="grpL19" Bounds="200,240,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=18"/>
				<Group Id="grpL20" Bounds="200,270,180,030" Class="clsLevelButton" ClassParams="@buttonSeriesNum=@layerSeriesNum,@levelNum=19"/>
			</Group>
			<Group Bounds="430,50,50,100">
				<TapArea Action="system.CloseCurrentScreen()" />
				<Text Text="back" FontId="fntSystem" Color="#FF0000" Rotation="90" Origin="0,20" />
			</Group>
		</Layer>
	</Class>	
</Include>